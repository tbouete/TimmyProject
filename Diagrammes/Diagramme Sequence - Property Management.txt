@startuml

title "Sequence Diagram : Property management"

Person -> Property : new Property prop(address, orientation, areaProperty)

alt Put property on sale

    Person -> Person : putPropertyOnSale(prop, availabilityDate, desiredSaleDate, desiredPrice)
    Person -> SalesMandate : new SalesMandate(prop, availabilityDate, desiredSaleDate, desiredPrice)
    Person -> Property : prop.setSaleMandate(sMand);
    Person -> Person : this.listSalesMandate.add(sMand)

end

alt Remove property from sale

    Person -> Person : removePropertyFromSale(prop)
    Person -> Person : listSalesMandate.remove(SM)

end

alt Signing sales agreement

    Person -> SalesAgreement : new SalesAgreement SA(prop, commissionAgency, sellingFees, priceToPaid, salesDate)
    Property -> SalesMandate : setSaleState(true)
    Person -> Person : listSalesAgreement.add(SA)

end

alt Selling property

    RealEstateAgency -> Person : transferProperty(buyer, seller)
    
    alt Seller
        Property -> Person : getSaleMandate()
        Person -> Person : removePropertyFromSale(prop)
        Person -> Person : listSalesMandate.remove(SM)
    end
    alt Buyer
        Person -> Person : buyProperty(SA)
        Property -> Property : setSaleMandate(null)
    end
    

end 

@enduml